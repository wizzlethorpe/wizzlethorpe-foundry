<form class="quickbrush-form" autocomplete="off">
  <div class="form-group">
    <label for="generation_type">{{localize "QUICKBRUSH.Dialog.Type"}}</label>
    <select name="generation_type" id="generation_type" class="quickbrush-select">
      {{#each types}}
        <option value="{{this.key}}" {{#if (eq ../generation_type this.key)}}selected{{/if}}>{{this.label}}</option>
      {{/each}}
    </select>
    <p class="notes">Choose what kind of image you're summoning â€” a portrait, a landscape, a monster, or an artifact!</p>
  </div>

  <div class="form-group">
    <label for="text">{{localize "QUICKBRUSH.Dialog.Description"}} <span class="required">*</span></label>
    <textarea name="text" id="text" rows="3" required placeholder="{{localize 'QUICKBRUSH.Dialog.DescriptionPlaceholder'}}" class="quickbrush-textarea">{{text}}</textarea>
    <p class="notes">Long-form text (e.g., journal entry, background) that may contain irrelevant details. Focus will be on physical description.</p>
  </div>

  <div class="form-group">
    <label for="image_name">{{localize "QUICKBRUSH.Dialog.ImageName"}} <span class="required">*</span></label>
    <input type="text" name="image_name" id="image_name" required placeholder="e.g., Elven Warrior, Ancient Library" value="{{image_name}}" class="quickbrush-input" />
    <p class="notes">This will be used as the filename when saving your image.</p>
  </div>

  <div class="form-group">
    <label for="prompt">{{localize "QUICKBRUSH.Dialog.Prompt"}}</label>
    <textarea name="prompt" id="prompt" rows="2" placeholder="{{localize 'QUICKBRUSH.Dialog.PromptPlaceholder'}}" class="quickbrush-textarea">{{prompt}}</textarea>
    <p class="notes">Specific instructions (e.g., "wearing a red cloak", "defensive stance"). This takes priority over the description above.</p>
  </div>

  <div class="form-group">
    <label for="quality">{{localize "QUICKBRUSH.Dialog.Quality"}}</label>
    <select name="quality" id="quality" class="quickbrush-select">
      {{#each qualities}}
        <option value="{{this.key}}" {{#if (eq ../quality this.key)}}selected{{/if}}>{{this.label}}</option>
      {{/each}}
    </select>
    <p class="notes">Higher quality = more detail, more brushstrokes.</p>
  </div>

  <div class="form-group">
    <label for="aspect_ratio">{{localize "QUICKBRUSH.Dialog.AspectRatio"}}</label>
    <select name="aspect_ratio" id="aspect_ratio" class="quickbrush-select">
      {{#each aspectRatios}}
        <option value="{{this.key}}" {{#if (eq ../aspect_ratio this.key)}}selected{{/if}}>{{this.label}}</option>
      {{/each}}
    </select>
    <p class="notes">Choose the shape of your canvas. Default: Square for most, Landscape for scenes.</p>
  </div>

  <div class="form-group">
    <label>Reference Images (Optional - Max 4)</label>
    <div class="reference-images-container">
      {{#each referenceImages}}
        <div class="reference-image-item">
          <img src="{{this}}" alt="Reference {{@index}}" />
          <button type="button" class="remove-reference-image" data-index="{{@index}}">
            <i class="fas fa-times"></i>
          </button>
        </div>
      {{/each}}
      {{#if (lt referenceImages.length 4)}}
        <button type="button" class="add-reference-image">
          <i class="fas fa-plus"></i> Add Image
        </button>
      {{/if}}
    </div>
    <p class="notes">Add up to 4 reference images to guide the generation style.</p>
  </div>

  {{#if targetDocument}}
  <div class="form-group">
    <label>
      <input type="checkbox" name="auto_update_image" checked />
      Automatically update image for "{{targetName}}"
    </label>
    <p class="notes">The generated image will automatically be set as the image for this {{targetDocument.documentName}}.</p>
  </div>
  {{/if}}

  <footer class="sheet-footer flexrow">
    <button type="button" class="dialog-button cancel" data-button="cancel">
      <i class="fas fa-times"></i> {{localize "QUICKBRUSH.Dialog.Cancel"}}
    </button>
    <button type="submit" class="dialog-button submit">
      <i class="fas fa-palette"></i> {{localize "QUICKBRUSH.Dialog.Generate"}}
    </button>
  </footer>
</form>
